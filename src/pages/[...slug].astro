---
import { getCollection, render } from "astro:content"
import BackBlock from "@/components/block/back-block.astro"
import GridBlock from "@/components/block/grid-block.astro"
import PageBlock from "@/components/block/page-block.astro"
import SingleColumnLayout from "@/layouts/single-column-layout.astro"

export async function getStaticPaths() {
	const pages = await getCollection("pages")
	return pages
		.filter((page) => page.data.permalink !== "/")
		.map((page) => {
			return {
				params: {
					slug: page.data.permalink,
				},
				props: { page },
			}
		})
}

const { page } = Astro.props
const { Content } = await render(page)
const { title, description, permalink } = page.data
---

<SingleColumnLayout {description} {title}>
  <GridBlock>
    <PageBlock {title} {permalink}>
      <Content />
    </PageBlock>
    <BackBlock />
  </GridBlock>
</SingleColumnLayout>
