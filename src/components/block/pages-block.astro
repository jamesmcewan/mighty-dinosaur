---
import SectionHeadingBlock from "@/components/block/section-heading-block.astro"
import getPages from "@/data/get-pages.ts"

const pages = await getPages()
---

<section>
  <SectionHeadingBlock> Pages </SectionHeadingBlock>
  <ul class="grid md:grid-cols-3 gap-6">
    {
      pages.map((page) => {
    const { title, description, permalink } = page.data;
        const titleWords = title.split(" ");
        return (
          <li>
            <a href={`/${permalink}/`} class="block rounded-3xl">
              <h2 class="font-cartridgerough uppercase text-tn-orange/90 hover:text-tn-orange text-lg lg:text-xl transition-all duration-150 ease-in-out hover:brightness-110">
                {titleWords.map((word, index) => (
                  <span
                    style={{
                      viewTransitionName: `title-${permalink}-word-${index}`,
                    }}
                  >
                    {word}{index < titleWords.length - 1 ? " " : ""}
                  </span>
                ))}
              </h2>
              <p class="text lg:text-lg font-rethink text-tn-text">{description}</p>
            </a>
          </li>
        );
      })
    }
  </ul>
</section>
